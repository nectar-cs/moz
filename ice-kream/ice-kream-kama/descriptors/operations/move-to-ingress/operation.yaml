kind: Operation
id: "app.operation.enable-ingress"
synopsis: "assets::enable-ingress-synopsis.md"
title: Enable Ingress
info: "Configure the application to be accessible at a specific web address."
labels:
  searchable: true
steps:
  - inherit: nmachine.cmp.step.create.type
    title: "Cert Manager Backend"

  - inherit: nmachine.cmp.step.create.configure
    title: "Cert Manager Config"

  - id::app.step.enable-ingress.main.main

---

kind: Step
id: "app.step.enable-ingress.main.main"
title: "Choose an address"
synopsis: "assets::enable-ingress-synopsis.md"
fields:
  - variable: "id::ingress.routes.monolith.host"
action: "sdk.action.commit_template_apply_safely"
commit:
  standard:
    kind: MergeSupplier
    source:
      - "get::parent>>default_commit"
      - "get::id::app.supplier.enable-ingress.vars-patch"

---

kind: Supplier
id: "app.supplier.enable-ingress.vars-patch"
source:
  ingress:
    enabled: true
  monolith:
    service:
      type: "ClusterIP"
  cert_manager:
    enabled: false